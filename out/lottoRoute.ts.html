<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: lottoRoute.ts</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: lottoRoute.ts</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @fileoverview Lotto 관련 API 라우터
 * @version 1.0.0
 */

import { Router } from "express";
import {
  saveRecentLottoNumber,
  getLottoNumber,
  saveExcelLottoNumber,
} from "../controllers/lottoController";
import asyncWrapper from "../middlewares/asyncWrapper";
import crawling from "../middlewares/crawling";

const router = Router();

/**
 * 엑셀 파일을 업로드하여 당첨번호를 DB에 저장하는 함수
 *
 * @api {post} /lotto/excel 엑셀 파일 업로드
 * @apiName SaveExcelLottoNumber
 * @apiGroup Lotto
 *
 * @apiParam {File} file 엑셀 파일
 *
 * @apiSuccess {string} message 성공 메시지
 *
 * @apiSuccessExample Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *       "message": "엑셀 파일이 성공적으로 저장되었습니다."
 *     }
 *
 * @apiError InvalidFile 유효하지 않은 파일 형식일 때
 *
 * @apiErrorExample Error-Response:
 *     HTTP/1.1 400 Bad Request
 *     {
 *       "error": "InvalidFile"
 *     }
 */
router.post("/excel", saveExcelLottoNumber);

/**
 * 최신 회차의 당첨번호를 크롤링하여 DB에 저장하는 함수
 *
 * @api {post} /lotto/recent 최신 회차 당첨번호 크롤링
 * @apiName SaveRecentLottoNumber
 * @apiGroup Lotto
 *
 * @apiSuccess {string} message 성공 메시지
 *
 * @apiSuccessExample Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *       "message": "최신 회차의 당첨번호가 성공적으로 저장되었습니다."
 *     }
 *
 * @apiError CrawlingFailed 크롤링 실패했을 때
 *
 * @apiErrorExample Error-Response:
 *     HTTP/1.1 500 Internal Server Error
 *     {
 *       "error": "CrawlingFailed"
 *     }
 */
router.post("/recent", crawling, asyncWrapper(saveRecentLottoNumber));

/**
 * 회차 범위를 입력받아 해당 회차의 당첨번호를 DB에서 가져오는 함수
 *
 * 회차가 없다면 1회차부터 마지막 회차까지의 당첨번호를 가져온다.
 *
 * @api {get} /lotto/recent/:startRound/:endRound 회차 범위 당첨번호 조회
 * @apiName GetLottoNumber
 * @apiGroup Lotto
 *
 * @apiParam {number} [startRound] 시작 회차 (optional)
 * @apiParam {number} [endRound] 끝 회차 (optional)
 *
 * @apiSuccess {string} message 성공 메시지
 * @apiSuccess {number} count 당첨번호 개수
 * @apiSuccess {Object[]} lottos 당첨번호 목록
 *
 * @apiSuccessExample Success-Response:
 *     HTTP/1.1 200 OK
 *     {
 *       "message": "1회차부터 10회차까지의 당첨번호",
 *       "count": 10,
 *       "lottos": [
 *         {
 *           "id": 1,
 *           "round": 1,
 *           "numbers": [1, 2, 3, 4, 5, 6],
 *           "bonusNumber": 7
 *         },
 *         ...
 *       ]
 *     }
 *
 * @apiError InvalidRoundRange 유효하지 않은 회차 범위일 때
 *
 * @apiErrorExample Error-Response:
 *     HTTP/1.1 400 Bad Request
 *     {
 *       "error": "InvalidRoundRange"
 *     }
 */
router.get("/recent", asyncWrapper(getLottoNumber));

export default router;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.11</a> on Tue Apr 18 2023 03:06:38 GMT+0900 (대한민국 표준시)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
